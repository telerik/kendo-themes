@use "sass:map";
@use "sass:meta";
@use "../../mixins/index.import.scss" as *;
@use "../../functions/index.import.scss" as *;
@use "../../color-system/_functions.import.scss" as *;
@use "../../_variables.scss" as *;
@use "./_variables.scss" as *;

@mixin kendo-button--theme-base() {

    // Solid button - base styles only
    .k-button-solid-base {
        @include box-shadow( $kendo-button-shadow );
    }

    // Solid button - state selectors only
    .k-button-solid-base {
        // Hover state
        &:hover,
        &.k-hover {
            @include box-shadow( $kendo-button-hover-shadow );
        }

        // Focus state
        &:focus,
        &.k-focus {
            box-shadow: inset $kendo-button-focus-shadow;
        }

        // Active state
        &:active,
        &.k-active {
            @include box-shadow( $kendo-button-active-shadow );
        }

        // Selected state
        &.k-selected {
            @include box-shadow( $kendo-button-selected-shadow );
        }

        // Disabled state
        &:disabled,
        &.k-disabled {
            @include box-shadow( $kendo-button-disabled-shadow );
        }
    }

    @each $name, $color in $kendo-button-theme-colors {
        @if ($name != "base") {
            $_button-text: k-color(on-#{$name});
            $_button-bg: k-color($name);
            $_button-border: k-color($name);

            $_button-hover-text: null;
            $_button-hover-bg: k-color(#{$name}-hover);
            $_button-hover-border: k-color(#{$name}-hover);

            $_button-active-text: null;
            $_button-active-bg: k-color(#{$name}-active);
            $_button-active-border: k-color(#{$name}-active);

            // Base styles only
            .k-button-solid-#{$name} {
            }

            // State selectors only
            .k-button-solid-#{$name} {
                // Hover state
                &:hover,
                &.k-hover {
                }

                // Focus state
                &:focus,
                &.k-focus {
                    @if ( $kendo-solid-button-shadow ) {
                        box-shadow: inset 0 0 $kendo-solid-button-shadow-blur $kendo-solid-button-shadow-spread color-mix(in srgb, k-color($name) ( $kendo-solid-button-shadow-opacity * 100% ), transparent);
                    }
                }

                // Active state
                &:active,
                &.k-active {
                }

                // Selected
                &.k-selected {
                }

                // Disabled state
                &:disabled,
                &.k-disabled {
                    @include box-shadow( $kendo-button-disabled-shadow );
                }
            }
        }
    }

    // Outline button - base styles
    @each $name, $color in map.merge( $kendo-button-theme-colors, ( "base": k-color(on-app-surface) ) ) {
        .k-button-outline-#{$name} {
            @include box-shadow( none );
            border-color: currentColor;
            color: k-color(#{$name}-on-surface);
            background-color: transparent;
        }
    }

    // Outline button - state selectors
    @each $name, $color in map.merge( $kendo-button-theme-colors, ( "base": k-color(on-app-surface) ) ) {
        .k-button-outline-#{$name} {
            // Hover state
            &:hover,
            &.k-hover {
                @if $name == "base" {
                } @else {
                }
            }

            // Focus state
            &:focus,
            &.k-focus {
                @if $kendo-outline-button-shadow {
                    @if $name == "base" {
                        box-shadow: inset 0 0 $kendo-outline-button-shadow-blur $kendo-outline-button-shadow-spread color-mix(in srgb, k-color(on-app-surface ) ( $kendo-outline-button-shadow-opacity * 100% ), transparent);
                    } @else {
                        box-shadow: inset 0 0 $kendo-outline-button-shadow-blur $kendo-outline-button-shadow-spread color-mix(in srgb, k-color($name ) ( $kendo-outline-button-shadow-opacity * 100% ), transparent);
                    }
                }
            }

            // Active state
            &:active,
            &.k-active {
                @if $name == "base" {
                } @else {
                }
            }

            // Selected
            &.k-selected {
                @if $name == "base" {
                } @else {
                }
            }

            // Disabled state
            &:disabled,
            &.k-disabled {
                color: $kendo-button-disabled-text;
            }
        }
    }

    // Flat button - base styles
    @each $name, $color in map.merge( $kendo-button-theme-colors, ( "base": inherit ) ) {
        .k-button-flat-#{$name} {
            @if $name == "base" {
                color: inherit;
            } @else {
                color: k-color(#{$name}-on-surface);
            }
        }
    }

    // Flat button - state selectors
    @each $name, $color in map.merge( $kendo-button-theme-colors, ( "base": inherit ) ) {
        .k-button-flat-#{$name} {
            // Disabled state
            &:disabled,
            &.k-disabled {
                color: $kendo-button-disabled-text;
            }
        }
    }

    // Link button - base styles
    @each $name, $color in map.merge( $kendo-button-theme-colors, ( "base": k-color(on-app-surface ) ) ) {
        .k-button-link-#{$name} {
            color: $color;
        }
    }

    // Link button - state selectors
    @each $name, $color in map.merge( $kendo-button-theme-colors, ( "base": k-color(on-app-surface ) ) ) {
        .k-button-link-#{$name} {
            // Hover
            &:hover,
            &.k-hover {
                @if $name == "base" {
                    color: k-color(on-app-surface);
                } @else {
                    color: k-color(#{$name}-hover);
                }
            }

            // Focus
            &:focus,
            &.k-focus {
                @if ( $kendo-link-button-shadow ) {
                    @if $name == "base" {
                        box-shadow: inset 0 0 $kendo-link-button-shadow-blur $kendo-link-button-shadow-spread color-mix(in srgb, k-color(on-app-surface ) ( $kendo-link-button-shadow-opacity * 100% ), transparent);
                    } @else {
                        box-shadow: inset 0 0 $kendo-link-button-shadow-blur $kendo-link-button-shadow-spread color-mix(in srgb, k-color($name ) ( $kendo-link-button-shadow-opacity * 100% ), transparent);
                    }
                }
            }

            // Active
            &:active,
            &.k-active {
                @if $name == "base" {
                    color: k-color(on-app-surface);
                } @else {
                    color: k-color(#{$name}-active);
                }
            }

            // Selected
            &.k-selected {
                @if $name == "base" {
                    color: k-color(on-app-surface);
                } @else {
                    color: k-color(#{$name}-active);
                }
            }

            // Disabled state
            &:disabled,
            &.k-disabled {
                color: $kendo-button-disabled-text;
            }
        }
    }

    // Clear button - base styles
    @each $name, $color in map.merge( $kendo-button-theme-colors, ( "base": k-color(on-app-surface ) ) ) {
        .k-button-clear-#{$name} {
            color: k-color(#{$name}-on-surface);
        }
    }

    // Clear button - state selectors
    @each $name, $color in map.merge( $kendo-button-theme-colors, ( "base": k-color(on-app-surface ) ) ) {
        .k-button-clear-#{$name} {
            &:focus,
            &.k-focus,
            &:active {
                &::after {
                    background-color: currentColor;
                    opacity: $kendo-clear-button-focus-opacity;
                    display: block;
                }
            }

            // Disabled state
            &:disabled,
            &.k-disabled {
                color: $kendo-button-disabled-text;
            }
        }
    }

}

@mixin kendo-button--theme() {
    @include kendo-button--theme-base();
}
