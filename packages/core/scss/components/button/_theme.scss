@use "sass:map";
@use "sass:meta";
@use "../../mixins/index.scss" as *;
@use "../../functions/index.scss" as *;
@use "../../color-system/_functions.scss" as *;
@use "../../_variables.scss" as *;
@use "./_variables.scss" as *;

@mixin kendo-button-appearance-controller($theme-colors) {
    .k-button {

        // Base (Default)
        --kendo-button-text: #{$kendo-button-text};
        --kendo-button-bg: #{$kendo-button-bg};
        --kendo-button-border: #{$kendo-button-border};
        --kendo-button-hover-text: #{$kendo-button-hover-text};
        --kendo-button-hover-bg: #{$kendo-button-hover-bg};
        --kendo-button-hover-border: #{$kendo-button-hover-border};
        --kendo-button-active-text: #{$kendo-button-active-text};
        --kendo-button-active-bg: #{$kendo-button-active-bg};
        --kendo-button-active-border: #{$kendo-button-active-border};

        // Base (Default) - Selected
        &.k-selected {
            --kendo-button-active-text: #{$kendo-button-selected-text};
            --kendo-button-active-bg: #{$kendo-button-selected-bg};
            --kendo-button-active-border: #{$kendo-button-selected-border};
        }

        @each $name, $color in $theme-colors {

            // Solid (Default)
            &.k-button-#{$name},
            &.k-button-#{$name}.k-button-solid {
                --kendo-button-text: #{k-color(on-#{$name})};
                --kendo-button-bg: #{k-color($name)};
                --kendo-button-border: #{k-color($name)};
                --kendo-button-hover-text: #{k-color(on-#{$name})};
                --kendo-button-hover-bg: #{k-color(#{$name}-hover)};
                --kendo-button-hover-border: #{k-color(#{$name}-hover)};
                --kendo-button-active-text: #{k-color(on-#{$name})};
                --kendo-button-active-bg: #{k-color(#{$name}-active)};
                --kendo-button-active-border: #{k-color(#{$name}-active)};
            }

            // Outline
            &.k-button-#{$name}.k-button-outline {
                --kendo-button-text: #{k-color(#{$name}-on-surface)};
                --kendo-button-bg: transparent;
                --kendo-button-border: currentColor;
                --kendo-button-hover-text: #{k-color(on-#{$name})};
                --kendo-button-hover-bg: #{k-color($name)};
                --kendo-button-hover-border: #{k-color($name)};
                --kendo-button-active-text: #{k-color(on-#{$name})};
                --kendo-button-active-bg: #{k-color($name)};
                --kendo-button-active-border: #{k-color($name)};
            }

            // Flat
            &.k-button-#{$name}.k-button-flat {
                --kendo-button-text: #{k-color(#{$name}-on-surface)};
                --kendo-button-bg: transparent;
                --kendo-button-border: transparent;
                --kendo-button-hover-text: #{k-color(#{$name}-on-surface)};
                --kendo-button-hover-bg: transparent;
                --kendo-button-hover-border: transparent;
                --kendo-button-active-text: #{k-color(#{$name}-on-surface)};
                --kendo-button-active-bg: transparent;
                --kendo-button-active-border: transparent;
            }

            // Link
            &.k-button-#{$name}.k-button-link {
                --kendo-button-text: #{k-color(#{$name}-on-surface)};
                --kendo-button-bg: transparent;
                --kendo-button-border: transparent;
                --kendo-button-hover-text: #{k-color(#{$name}-on-surface)};
                --kendo-button-hover-bg: transparent;
                --kendo-button-hover-border: transparent;
                --kendo-button-active-text: #{k-color(#{$name}-on-surface)};
                --kendo-button-active-bg: transparent;
                --kendo-button-active-border: transparent;
            }

            // Clear
            &.k-button-#{$name}.k-button-clear {
                --kendo-button-text: #{k-color(#{$name}-on-surface)};
                --kendo-button-bg: transparent;
                --kendo-button-border: transparent;
                --kendo-button-hover-text: #{k-color(#{$name}-on-surface)};
                --kendo-button-hover-bg: transparent;
                --kendo-button-hover-border: transparent;
                --kendo-button-active-text: #{k-color(#{$name}-on-surface)};
                --kendo-button-active-bg: transparent;
                --kendo-button-active-border: transparent;
            }
        }

        // Base (Theme Color)
        &.k-button-base,
        &.k-button-base.k-button-solid {
            --kendo-button-border: #{$kendo-button-border};

            // Base (Theme Color) - Selected
            &.k-selected {
                --kendo-button-active-text: #{$kendo-button-selected-text};
                --kendo-button-active-bg: #{$kendo-button-selected-bg};
                --kendo-button-active-border: #{$kendo-button-selected-border};
            }
        }
    }
}

@mixin kendo-button--theme-base() {
    @include kendo-button-appearance-controller($kendo-button-theme-colors);

    // Apply CSS properties from variables
    .k-button {
        color: var(--kendo-button-text);
        background-color: var(--kendo-button-bg);
        border-color: var(--kendo-button-border);
        @include box-shadow($kendo-button-shadow);

        // Hover state
        &:hover,
        &.k-hover {
            color: var(--kendo-button-hover-text);
            background-color: var(--kendo-button-hover-bg);
            border-color: var(--kendo-button-hover-border);
            @include box-shadow($kendo-button-hover-shadow);
        }

        // Focus state
        &:focus,
        &.k-focus {
            @include focus-indicator($kendo-button-focus-shadow, true, true);
        }

        // Active state
        &:active,
        &.k-active {
            color: var(--kendo-button-active-text);
            background-color: var(--kendo-button-active-bg);
            border-color: var(--kendo-button-active-border);
            @include box-shadow($kendo-button-active-shadow);
        }

        // Selected state
        &.k-selected {
            color: var(--kendo-button-active-text);
            background-color: var(--kendo-button-active-bg);
            border-color: var(--kendo-button-active-border);
            @include box-shadow($kendo-button-selected-shadow);
        }

        // Disabled state
        &:disabled,
        &.k-disabled {
            color: $kendo-button-disabled-text;
            background-color: $kendo-button-disabled-bg;
            border-color: $kendo-button-disabled-border;
            @include box-shadow($kendo-button-disabled-shadow);
        }
    }
}
