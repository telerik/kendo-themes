@use "../../mixins/index.import.scss" as *;
@use "../../color-system/_functions.import.scss" as *;
@use "./variables.scss" as *;

@mixin kendo-gantt--theme-base() {

    // Gantt
    .k-gantt {
        color: $kendo-gantt-text;
        background-color: $kendo-gantt-bg;
        border-color: $kendo-gantt-border;

        // React gantt
        .k-treelist-scrollable {
            .k-task-milestone .k-task-milestone-content {
                background-color: $kendo-gantt-milestone-bg;
        border-color: $kendo-gantt-milestone-border;
            }
            .k-task-milestone.k-selected .k-task-milestone-content {
                background-color: $kendo-gantt-milestone-selected-bg;
                border-color: $kendo-gantt-milestone-selected-border;
            }
        }

        .k-gantt-dependencies-svg {
            polyline {
                fill: none;
                stroke: $kendo-gantt-line-fill;
            }

            polyline.k-selected {
                stroke: $kendo-gantt-line-selected-fill;
            }
        }
    }

    // Header and footer
    // .k-gantt-header - placeholder for future styling
    .k-gantt-footer {
        @include box-shadow( none );
    }
    // .k-gantt-toolbar - placeholder for future styling

    // Treelist
    .k-gantt-treelist {
        color: $kendo-gantt-treelist-text;
        background-color: $kendo-gantt-treelist-bg;
        border-color: $kendo-gantt-treelist-border;

        .k-treelist,
        .k-grid-content {
            background-color: transparent;
        }
    }

    // Rows and colls
    // .k-gantt-rows - placeholder for future styling  
    // .k-gantt-columns - placeholder for future styling

    // Non work hours
    .k-gantt .k-nonwork-hour {
        color: $kendo-gantt-nonwork-text;
        background-color: $kendo-gantt-nonwork-bg;
        border-color: $kendo-gantt-nonwork-border;
    }

    // Task dot
        // Task details
    // .k-task-dot - placeholder for future styling
    .k-task-dot::before {
        background-color: $kendo-gantt-dot-bg;
            border-color: $kendo-gantt-dot-border;
    }
    .k-task-dot:hover::before,
    .k-task-dot.k-hover::before {
        background-color: $kendo-gantt-dot-hover-bg;
        border-color: $kendo-gantt-dot-hover-border;
    }

    // Milestone
    .k-task-milestone {
        background-color: $kendo-gantt-milestone-bg;
        border-color: $kendo-gantt-milestone-border;

        &.k-task-delayed {
            @include repeating-striped-gradient($kendo-gantt-delayed-bg, k-color(app-surface), 90deg, 4px, 2px);
        }

        &.k-task-advanced {
            background-color: $kendo-gantt-advanced-bg;
        }
    }
    .k-task-milestone.k-selected {
        background-image: none;
        background-color: $kendo-gantt-milestone-selected-bg;
            border-color: $kendo-gantt-milestone-selected-border;
    }

    // Summary
    .k-task-summary {
        color: $kendo-gantt-summary-bg;

        &.k-task-delayed {
            color: $kendo-gantt-delayed-bg-lighter;
        }

        &.k-task-advanced {
            color: $kendo-gantt-advanced-bg-lighter;
        }
    }
    .k-task-summary-complete {
        color: $kendo-gantt-summary-progress-bg;
    }
    .k-task-delayed .k-task-summary-complete {
        color: $kendo-gantt-delayed-bg;
    }
    .k-task-advanced .k-task-summary-complete {
        color: $kendo-gantt-advanced-bg;
    }
    .k-task-summary.k-selected {
        color: $kendo-gantt-summary-selected-bg;

        .k-task-summary-complete {
            color: $kendo-gantt-summary-progress-selected-bg;
        }
    }

    // Tasks
    .k-task-single {
        color: $kendo-gantt-task-text;
        background-color: $kendo-gantt-task-bg;
        border-color: $kendo-gantt-task-border;

        &.k-task-delayed {
            background-color: $kendo-gantt-delayed-bg-lighter;
        }

        &.k-task-advanced {
            background-color: $kendo-gantt-advanced-bg-lighter;
        }

        .k-task-complete {
            background-color: $kendo-gantt-task-progress-bg;
        }
    }
    .k-task-delayed .k-task-complete {
        background-color: $kendo-gantt-delayed-bg;
    }
    .k-task-advanced .k-task-complete {
        background-color: $kendo-gantt-advanced-bg;
    }
    .k-task-single.k-selected {
        color: $kendo-gantt-task-selected-text;
        background-color: $kendo-gantt-task-selected-bg;
        border-color: $kendo-gantt-task-selected-border;

        .k-task-complete {
            background-color: $kendo-gantt-task-progress-selected-bg;
        }
    }

    // Dependency Lines
    .k-gantt-line {
        color: $kendo-gantt-line-fill;
    }
    .k-gantt-line.k-selected {
        color: $kendo-gantt-line-selected-fill;
    }

    // Planned element base styles
    .k-task-planned .k-task-moment {
        background-color: transparent;
        border-color: $kendo-gantt-planned-border;
    }
    
    .k-task-planned .k-task-duration {
        background-color: $kendo-gantt-planned-bg;
    }
    
    // Planned element hover state
    .k-task-planned:hover .k-task-moment {
        background-color: $kendo-gantt-planned-bg;
    }

    // Delay offset
    .k-task-offset {
        @include repeating-striped-gradient($kendo-gantt-delayed-bg, k-color(app-surface), 135deg, 4px, 2px);

        .k-resize-e::before {
            border-color: $kendo-gantt-action-on-offset-text;
        }

        .k-task-actions {
            color: $kendo-gantt-action-on-offset-text;
        }
    }

    .k-task-offset:hover {
        @include repeating-striped-gradient($kendo-gantt-delayed-bg-lighter, k-color(app-surface), 135deg, 4px, 2px);
    }

    .k-pdf-export .k-task-offset {
        background-color: $kendo-gantt-delayed-bg;
    }

    // Tooltips
    .k-offset-tooltip-delayed {
        background-color: $kendo-gantt-delayed-bg;
    }

    .k-planned-tooltip {
        background-color: $kendo-gantt-planned-bg;
    }

    .k-gantt-tooltip-validation {
        &::before {
            background-color: $kendo-gantt-validation-tooltip-border;
        }
    }
    .k-gantt-tooltip-valid {
        &::before {
            background-color: $kendo-gantt-validation-tooltip-valid-border;
        }
    }
    .k-gantt-tooltip-invalid {
        &::before {
            background-color: $kendo-gantt-validation-tooltip-invalid-border;
        }
    }

}

@mixin kendo-gantt--theme() {
    @include kendo-gantt--theme-base();
}
