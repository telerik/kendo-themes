@use "../../mixins/index.import.scss" as *;
@use "../../color-system/_functions.import.scss" as *;
@use "../../_variables.scss" as *;
@use "./variables.scss" as *;

@mixin kendo-calendar--theme-base() {

    .k-calendar {
        color: $kendo-calendar-text;
        background-color: $kendo-calendar-bg;
        border-color: $kendo-calendar-border;

        // TODO: do we even use this?
        // Header / footer
        .k-header {
            color: $kendo-calendar-header-text;
            background-color: $kendo-calendar-header-bg;
            border-color: inherit;
            @include linear-gradient($kendo-calendar-header-gradient);
            @include box-shadow( $kendo-calendar-header-shadow );
        }

        // Header cells
        .k-calendar-th,
        .k-calendar-caption,
        .k-meta-header,
        .k-month-header {
            color: $kendo-calendar-header-cell-text;
        }

        // Special days
        .k-calendar-view .k-today {
            @if $kendo-calendar-today-style == box {
                .k-calendar-cell-inner {
                    box-shadow: inset 0 0 0 1px $kendo-calendar-today-color;
                }
                &.k-focus .k-calendar-cell-inner {
                    box-shadow: inset 0 0 0 1px $kendo-calendar-today-color, $kendo-calendar-cell-focus-shadow;
                }
            } @else if $kendo-calendar-today-style == color {
                color: $kendo-calendar-today-color;
            }
        }
        .k-other-month {
            color: $kendo-calendar-other-month-text;
        background-color: $kendo-calendar-other-month-bg;
        }
        .k-weekend {
            color: $kendo-calendar-weekend-text;
        border-color: $kendo-calendar-weekend-bg;
        }
        .k-alt {
            // remove default k-alt background color
            background-color: transparent;
            color: $kendo-calendar-week-number-text;
            background-color: $kendo-calendar-week-number-bg;
        }

        // Interactive states
        .k-calendar-td:hover .k-calendar-cell-inner,
        .k-calendar-td.k-hover .k-calendar-cell-inner {
            color: $kendo-calendar-cell-hover-text;
        background-color: $kendo-calendar-cell-hover-bg;
        border-color: $kendo-calendar-cell-hover-border;
        @include linear-gradient($kendo-calendar-cell-hover-gradient);
        }
        .k-calendar-td.k-selected .k-calendar-cell-inner {
            color: $kendo-calendar-cell-selected-text;
        background-color: $kendo-calendar-cell-selected-bg;
        border-color: $kendo-calendar-cell-selected-border;
        @include linear-gradient($kendo-calendar-cell-selected-gradient);
        }
        .k-calendar-td.k-selected:hover .k-calendar-cell-inner,
        .k-calendar-td.k-selected.k-hover .k-calendar-cell-inner {
            color: $kendo-calendar-cell-selected-hover-text;
        background-color: $kendo-calendar-cell-selected-hover-bg;
        border-color: $kendo-calendar-cell-selected-hover-border;
        @include linear-gradient($kendo-calendar-cell-selected-hover-gradient);
        }
        .k-calendar-td:focus .k-calendar-cell-inner,
        .k-calendar-td.k-focus .k-calendar-cell-inner {
            box-shadow: inset $kendo-calendar-cell-focus-shadow;
        }
        .k-calendar-td.k-selected:focus .k-calendar-cell-inner,
        .k-calendar-td.k-selected.k-focus .k-calendar-cell-inner {
            box-shadow: inset $kendo-calendar-cell-selected-focus-shadow;
        }

        // Calendar navigation
        .k-calendar-navigation {
            color: $kendo-calendar-navigation-text;
            background-color: $kendo-calendar-navigation-bg;
            box-shadow: inset -1px 0 $kendo-calendar-navigation-border;

            li:hover,
            li.k-hover {
                color: $kendo-calendar-navigation-hover-text;
            }
        }
        .k-calendar-navigation-highlight {
            color: $kendo-calendar-text;
        background-color: $kendo-calendar-bg;
        border-color: $kendo-calendar-border;
        }

        .k-calendar-navigation-marker {
            color: $kendo-calendar-navigation-marker-text;
        }

        // Invalid
        &.k-invalid,
        &.k-invalid:hover,
        &.ng-invalid.ng-touched,
        &.ng-invalid.ng-dirty {
            border-color: k-color(error);
        }
    }

    .k-rtl .k-calendar,
    [dir="rtl"] .k-calendar,
    .k-calendar.k-rtl,
    .k-calendar[dir="rtl"] {
        .k-calendar-navigation {
            box-shadow: inset 1px 0 $kendo-calendar-navigation-border;
        }
    }

    // Scheduler integration
    .k-scheduler .k-calendar .k-other-month {
        color: $kendo-calendar-other-month-text;
        background-color: transparent;
    }

    // Multiview calendar
    .k-calendar { // stylelint-disable-line

        $kendo-calendar-range-gap: k-spacing(1px) !default;
        $kendo-calendar-range-split-size: 5px !default;

        .k-range-start,
        .k-range-end,
        .k-range-mid {
            background-color: $kendo-calendar-range-bg;
        }

        .k-range-start,
        .k-range-end {
            .k-calendar-cell-inner {
                background-color: $kendo-calendar-cell-selected-bg;
            }
        }

        .k-range-start.k-active,
        .k-range-end.k-active {
            .k-calendar-cell-inner {
                box-shadow: inset 0 0 2px 2px rgba(0, 0, 0, .2);
            }
        }

        .k-range-split-start,
        .k-range-split-end {
            position: relative;

            &::after {
                content: "";
                display: block;
                position: absolute;
                inset-block-start: 0;
                inset-block-end: 0;
                width: $kendo-calendar-range-split-size;
            }
        }

        .k-range-split-start::after {
            inset-inline-start: -$kendo-calendar-range-split-size;
            inset-inline-end: auto;
            background-image: linear-gradient(to left, $kendo-calendar-range-bg, transparent 100%);
        }

        .k-range-split-end::after {
            inset-inline-end: -$kendo-calendar-range-split-size;
            inset-inline-start: auto;
            background-image: linear-gradient(to right, $kendo-calendar-range-bg, transparent 100%);
        }
    }

}

@mixin kendo-calendar--theme() {
    @include kendo-calendar--theme-base();
}
