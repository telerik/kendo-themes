@use "sass:map";
@use "../core/_index.scss" as *;
@use "./_variables.scss" as *;
@use "@progress/kendo-theme-core/scss/components/button/_theme.scss" as *;

@mixin kendo-button--theme() {

    @include kendo-button--theme-base();

    .k-button-solid-base {

        &:focus,
        &.k-focus {
            color: $kendo-button-focus-text;
            background-color: $kendo-button-focus-bg;
            border-color: $kendo-button-focus-border;
            outline-color: $kendo-button-focus-outline;

            &:hover,
            &.k-hover {
                color: $kendo-button-focus-hover-text;
                background-color: $kendo-button-focus-hover-bg;
                border-color: $kendo-button-focus-hover-border;
                outline-color: $kendo-button-focus-hover-outline;
            }
        }

        &:active,
        &.k-active {
            color: $kendo-button-active-text;
            background-color: $kendo-button-active-bg;
            border-color: $kendo-button-active-border;

            &:hover,
            &.k-hover {
                color: $kendo-button-active-hover-text;
                background-color: $kendo-button-active-hover-bg;
                border-color: $kendo-button-active-hover-border;
            }
        }

        &.k-selected {
            color: $kendo-button-active-text;
            background-color: $kendo-button-active-bg;
            border-color: $kendo-button-active-border;

            &:hover,
            &.k-hover {
                color: $kendo-button-active-hover-text;
                background-color: $kendo-button-active-hover-bg;
                border-color: $kendo-button-active-hover-border;
            }
        }

        // Disabled state
        &:disabled,
        &.k-disabled {
            @include fill(
                $kendo-button-disabled-text,
                $kendo-button-disabled-bg,
                $kendo-button-disabled-border
            );
        }
    }

    .k-button-solid-warning,
    .k-button-solid-light {
        &:focus::after,
        &.k-focus::after {
            outline-color: k-color(app-surface);
        }
    }

    @each $theme-color, $color in $kendo-button-theme-colors {
        @if($theme-color != "base") {
            .k-button-flat-#{$theme-color} {
                color: k-color(#{$theme-color}-on-surface);
                background-color: initial !important; // stylelint-disable-line declaration-no-important
                border-color: transparent;

                &:hover,
                &.k-hover {
                    color: k-color(#{$theme-color}-hover);
                    background-color: k-color(#{$theme-color}-subtle) !important; // stylelint-disable-line declaration-no-important
                    border-color: transparent;
                }

                &:focus,
                &.k-focus {
                    color: k-color(#{$theme-color}-on-surface);
                    background-color: initial !important; // stylelint-disable-line declaration-no-important
                    border-color: transparent;
                    outline-color: k-color(#{$theme-color}-subtle-active);

                    &:hover,
                    &.k-hover {
                        color: k-color(#{$theme-color}-hover);
                        background-color: k-color(#{$theme-color}-subtle) !important; // stylelint-disable-line declaration-no-important
                        border-color: transparent;
                        outline-color: k-color(#{$theme-color}-subtle-active);
                    }

                    &::after {
                        outline-color: k-color(#{$theme-color}-subtle-active);
                    }
                }

                &:active,
                &.k-active,
                &.k-selected {
                    color: k-color(#{$theme-color}-hover);
                    background-color: k-color(#{$theme-color}-subtle-hover) !important; // stylelint-disable-line declaration-no-important
                    border-color: transparent;

                    &:hover,
                    &.k-hover {
                        color: k-color(#{$theme-color}-hover);
                        background-color: k-color(#{$theme-color}-subtle) !important; // stylelint-disable-line declaration-no-important
                        border-color: transparent;
                    }
                }
            }
        }

        .k-button-clear-#{$theme-color} {
            color: k-color(#{$theme-color}-on-surface);
            background-color: transparent !important; // stylelint-disable-line declaration-no-important
            border-color: transparent;
            &:focus,
            &.k-focus {
                color: k-color(#{$theme-color}-on-surface);
                background-color: k-color(#{$theme-color}-subtle) !important; // stylelint-disable-line declaration-no-important
                border-color: transparent;
            }
        }

        .k-button-link-#{$theme-color} {
            &:focus::after,
            &.k-focus::after {
                outline-color: k-color(#{$theme-color}-subtle-active);
            }
        }
    }

    .k-button-group:disabled,
    .k-button-group.k-disabled,
    .k-button-group[disabled] {
        background-color: inherit;
    }

    .k-disabled,
    :disabled {

        .k-button-solid {
            color: $kendo-button-disabled-text;
            background-color: $kendo-button-disabled-bg;
            border-color: $kendo-button-disabled-border;
        }

        .k-button-outline {
            color: $kendo-button-outline-disabled-text;
            background-color: $kendo-button-outline-disabled-bg;
            border-color: $kendo-button-outline-disabled-border;
        }

        .k-button-flat,
        .k-button-clear,
        .k-button-link {
            color: $kendo-button-flat-disabled-text;
            background-color: $kendo-button-flat-disabled-bg;
            border-color: $kendo-button-flat-disabled-border;
        }
    }

    .k-button-flat-base.k-disabled {
        color: color-mix(in srgb, k-color(on-app-surface) 46%, transparent);
    }

}
