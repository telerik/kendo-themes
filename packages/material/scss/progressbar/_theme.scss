$progress-animation-timing: 2s infinite !default;

@mixin progress-indeterminate-animation($primary-animation-name, $secondary-animation-name, $translate-axis, $scale-axis) {
    @keyframes #{$primary-animation-name} {
        0% {
            transform: unquote("#{$translate-axis}(0)") unquote("#{$scale-axis}(0)");
        }
        20% {
            transform: unquote("#{$translate-axis}(0)") unquote("#{$scale-axis}(.08)");
            animation-timing-function: cubic-bezier(.4, .08, .75, .8);
        }
        60% {
            transform: unquote("#{$translate-axis}(83%)") unquote("#{$scale-axis}(.75)");
            animation-timing-function: cubic-bezier(.21, .25, .58, .98);
        }
        100% {
            transform: unquote("#{$translate-axis}(250%)") unquote("#{$scale-axis}(.08)");
        }
    }

    @keyframes #{$secondary-animation-name} {
        0% {
            transform: unquote("#{$translate-axis}(0)") unquote("#{$scale-axis}(.08)");
            animation-timing-function: cubic-bezier(.18, 0, .54, .42);
        }
        22% {
            transform: unquote("#{$translate-axis}(34%)") unquote("#{$scale-axis}(.45)");
            animation-timing-function: cubic-bezier(.22, .25, .7, .9);
        }
        46% {
            transform: unquote("#{$translate-axis}(82%)") unquote("#{$scale-axis}(.75)");
            animation-timing-function: cubic-bezier(.33, .3, .4, 1.2);
        }
        100% {
            transform: unquote("#{$translate-axis}(160%)") unquote("#{$scale-axis}(.08)");
        }
    }
}

@include exports("progressbar/theme") {

    $progressbar-status-offset: ($progressbar-height * 2) !default;
    $progressbar-status-font-size: 11px !default;

    // Theme
    .k-progressbar {
        @include border-radius( 0 );
        @include fill( $progressbar-text, $progressbar-bg, $progressbar-border, $progressbar-gradient );
        overflow: visible;

        .k-progress-status-wrap {
            font-size: $progressbar-status-font-size;
        }

        .k-state-selected {
            @include fill( $progressbar-fill-text, $progressbar-fill-bg, $progressbar-fill-border, $progressbar-fill-gradient );
        }

        .k-item {
            border-color: $progressbar-chunk-border;
        }
    }

    .k-progressbar-horizontal {
        .k-progress-status-wrap {
            top: -$progressbar-status-offset;
        }
    }

    .k-progressbar-vertical {

        .k-progress-status-wrap {
            top: 0;
            left: -$progressbar-status-offset;
        }
        &.k-progressbar-reverse .k-progress-status-wrap {
            left: $progressbar-status-offset;
        }
    }

    .k-progressbar-indeterminate {
        @include progress-indeterminate-animation(progress-primary-indeterminate-horizontal, progress-secondary-indeterminate-horizontal, translateX, scaleX);
        @include progress-indeterminate-animation(progress-primary-indeterminate-vertical, progress-secondary-indeterminate-vertical, translateY, scaleY);
        overflow: hidden;

        &::before,
        &::after {
            content: "";
            display: block;
            width: 100%;
            height: 100%;
            background: $progressbar-fill-bg;
            position: absolute;
            transform-origin: 0 0;
        }

        &.k-progressbar-horizontal {
            &::before {
                top: 0;
                left: -150%;
                animation: progress-primary-indeterminate-horizontal $progress-animation-timing;
            }
            &::after {
                top: 0;
                left: -50%;
                animation: progress-secondary-indeterminate-horizontal $progress-animation-timing;
            }
        }

        &.k-progressbar-vertical {
            &::before {
                top: -150%;
                left: 0;
                animation: progress-primary-indeterminate-vertical $progress-animation-timing;
            }
            &::after {
                top: -50%;
                left: 0;
                animation: progress-secondary-indeterminate-vertical $progress-animation-timing;
            }
        }
    }

}
